{% extends "cyano/base.html" %}

{% comment %}
Import data form template

Author: Jonathan Karr, jkarr@stanford.edu
Affiliation: Covert Lab, Department of Bioengineering, Stanford University
Last updated: 2012-07-17
{% endcomment %}

{% load templatetags %}

{% block head_title %}{{ block.super }} :: Import{% endblock %}
{% block page_title %}Import data{% endblock %}
{% block action_icons %}{% endblock %}

{% block content %}
<form id="form" name="importData" action="{% if species %}{% url "cyano.views.importData" species_wid=species.wid %}{% else %}{% url "cyano.views.importData" %}{% endif %}" method="post" enctype="multipart/form-data">
	{% csrf_token %}
	
	<div class="block">
		<h1>Select {{ form.species.label }}</h1>
		<div class="content" style="width:340px;">
			<ol style="margin:0px; padding:0px; padding-left:20px;">
			<li>Edit existing:
				<select class="select" name="species" id="species" style="width:300px;" onchange="javascript: document.getElementById('new_species').value=''; document.getElementById('new_wid').value='';"/>
					<option disabled>(Create a new species)</option>
					{% for choice in form.species.field.choices %}
					<option value="{{ choice.0 }}"{% if choice.0 == species.wid %} selected{% endif %}><i>{{ choice.1 }}</i></option>
					{% endfor %}
				</select><br/>
				{% if form.species.errors|length > 0 %}<div class="errors">{{ form.species.errors|join:" " }}</div>{% endif %}<center><i>or</i></center></li>
			<li>Enter name of new species:<input class="text" type="text" name="new_species" id="new_species" style="width:300px;" onchange="javascript: document.getElementById('species').selectedIndex=0;"/>
			{% if form.new_species.errors|length > 0%}<div class="errors">{{ form.new_species.errors|join:" " }}</div>{% endif %}
			<br/>
			And a new identifier:<input class="text" type="text" name="new_wid" id="new_wid" style="width:300px;" onchange="javascript: document.getElementById('species').selectedIndex=0;"/></li>
			{% if form.new_wid.errors|length > 0%}<div class="errors">{{ form.new_wid.errors|join:" " }}</div>{% endif %}
			</ol>
		</div>
	</div>
	
	<div class="block">
		<h1>Enter a short summary</h1>
		<div class="content">
			{% if form.reason.errors|length > 0 %}<div class="errors">{{ form.reason.errors|join:" " }}</div>{% endif %}
			<input class="text" type="text" name="reason" id="reason" style="width:600px;"/>
		</div>
	</div>
	
	<div class="block">
		<h1>Select {{ form.data_type.label }}</h1>
		<div class="content">
			{% if form.data_type.errors|length > 0 %}<div class="errors">{{ form.file.errors|join:" " }}</div>{% endif %}
			{% for choice in form.data_type.field.choices %}
			<div><input type="radio" name="data_type" value="{{ choice.0 }}" />{{ choice.1 }}</label></div>
			{% endfor %}
		</div>
	</div>
	
	<div class="block">
		<h1>Select {{ form.file.label }}</h1>
		<div class="content">
			{% if form.file.errors|length > 0 %}<div class="errors">{{ form.file.errors|join:" " }}</div>{% endif %}
			<input class="file" type="file" name="file" />
		</div>
	</div>
	
	<input class="button" type="submit" value="Submit" />
</form>
{% endblock %}
