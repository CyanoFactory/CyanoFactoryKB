{% extends "cyano/base.html" %}

{% comment %}
Import data form template

Author: Jonathan Karr, jkarr@stanford.edu
Affiliation: Covert Lab, Department of Bioengineering, Stanford University
Last updated: 2012-07-17

Copyright (c) 2013 Gabriel Kind <gkind@hs-mittweida.de>
Hochschule Mittweida, University of Applied Sciences

Released under the MIT license
{% endcomment %}

{% load templatetags %}
{% load widget_tweaks %}

{% block head_title %}{{ block.super }} :: Import{% endblock %}
{% block page_title %}Import data{% endblock %}
{% block action_icons_share %}{% endblock %}

{% block head %}
{{ block.super }}

<script language="javascript" type="text/javascript">
$(document).on('click','.close_box',function(){
    $(this).parent().fadeTo(300,0,function(){
          $(this).remove();
    });
});

$(document).on('input', '#id_chromosome',function(){
	$('#id_chromosome_wid').val($(this).val().replace(/[^A-Za-z0-9_-]/g, '-'))
});

$(document).ready(function() {
	// special case for page reload
	if (!( $('input[value="genbank"]:checked').val())) {
		$('#genbank').hide();
	}
	
	$('input[name="data_type"]').on('change', function (e) { 
		if( $('input[value="genbank"]:checked').val()) {
			$('#genbank').show();
		}
		else{
			$('#genbank').hide();
		}         
	});
});
</script>
{% endblock %}

{% block extrastyles %}
{{ block.super }}

#content ul {
	list-style: none;
    list-style-type: none;
	margin: 0;
	padding-left: 0;
}

{% endblock %}

{% block content %}
<form id="form" name="importData" action="{% if species %}{% url "cyano.views.importData" species_wid=species.wid %}{% else %}{% url "cyano.views.importData" %}{% endif %}" method="post" enctype="multipart/form-data">
	{% csrf_token %}
	
	{% if success %}
	<div class="block" id="{{ success|yesno }}" style="position:relative;">
		<div class="close_box">X</div>
		<h1>{{ success|yesno:"Success,Error,Maybe"}}</h1>
		<div class="content" style="width:340px;">
		{{ message }}
		</div>
	</div>
	{% endif %}

    <div class="panel panel-default">
      <div class="panel-heading">Select {{ form.species.label }}</div>
      <div class="panel-body">

            <label>Turns this</label>
            <select class="input-large form-control combobox">
              <option value="" selected="selected">Select a State</option>
              <option value="AL">Alabama</option>
              <option value="AK">Alaska</option>
              <option value="AZ">Arizona</option>
              <option value="AR">Arkansas</option>
              <option value="CA">California</option>
              <option value="CO">Colorado</option>
              <option value="CT">Connecticut</option>
              <option value="DE">Delaware</option>
              <option value="DC">District Of Columbia</option>
              <option value="FL">Florida</option>
              <option value="GA">Georgia</option>
              <option value="HI">Hawaii</option>
              <option value="ID">Idaho</option>
              <option value="IL">Illinois</option>
              <option value="IN">Indiana</option>
              <option value="IA">Iowa</option>
              <option value="KS">Kansas</option>
              <option value="KY">Kentucky</option>
              <option value="LA">Louisiana</option>
              <option value="ME">Maine</option>
              <option value="MD">Maryland</option>
              <option value="MA">Massachusetts</option>
              <option value="MI">Michigan</option>
              <option value="MN">Minnesota</option>
              <option value="MS">Mississippi</option>
              <option value="MO">Missouri</option>
              <option value="MT">Montana</option>
              <option value="NE">Nebraska</option>
              <option value="NV">Nevada</option>
              <option value="NH">New Hampshire</option>
              <option value="NJ">New Jersey</option>
              <option value="NM">New Mexico</option>
              <option value="NY">New York</option>
              <option value="NC">North Carolina</option>
              <option value="ND">North Dakota</option>
              <option value="OH">Ohio</option>
              <option value="OK">Oklahoma</option>
              <option value="OR">Oregon</option>
              <option value="PA">Pennsylvania</option>
              <option value="RI">Rhode Island</option>
              <option value="SC">South Carolina</option>
              <option value="SD">South Dakota</option>
              <option value="TN">Tennessee</option>
              <option value="TX">Texas</option>
              <option value="UT">Utah</option>
              <option value="VT">Vermont</option>
              <option value="VA">Virginia</option>
              <option value="WA">Washington</option>
              <option value="WV">West Virginia</option>
              <option value="WI">Wisconsin</option>
              <option value="WY">Wyoming</option>
            </select>

        {% if species %}
		<b>{{ species.name }}</b> <a href="{% url "cyano.views.importData" %}" title="Change species">(change)</a>
		{% else %}
		{% render_field form.species type="select" class+="combobox" %}
		{% if form.species.errors|length > 0 %}<div class="errors">{{ form.species.errors|join:" " }}</div>{% endif %}
		<br/>
		{% endif %}
      </div>
    </div>
	
	<div class="block">
		<h1>Select {{ form.species.label }}</h1>
		<div class="content" style="width:340px;">
		{% if species %}
		<b>{{ species.name }}</b> <a href="{% url "cyano.views.importData" %}" title="Change species">(change)</a>
		{% else %}
		{% render_field form.species class+="select" style+="width:300px" %}
		{% if form.species.errors|length > 0 %}<div class="errors">{{ form.species.errors|join:" " }}</div>{% endif %}
		<br/>
		{% endif %}
		</div>
	</div>
	
	<div class="block">
		<h1>Select {{ form.data_type.label }}</h1>
		<div class="content">
			{% render_field form.data_type %}
			{% if form.data_type.errors|length > 0 %}<div class="errors">{{ form.data_type.errors|join:" " }}</div>{% endif %}
		</div>
	</div>
	
	<div class="block" id="genbank">
		<h1>Provide additional information for GenBank</h1>
		<div class="content" style="width:340px;">
			{{ form.chromosome.label_tag }}{% render_field form.chromosome class+="text" style+="width:300px" %}<br/>
			{% if form.chromosome.errors|length > 0 %}<div class="errors">{{ form.chromosome.errors|join:" " }}</div>{% endif %}
			{{ form.chromosome_wid.label_tag }}{% render_field form.chromosome_wid class+="text" style+="width:300px" %}
			{% if form.chromosome_wid.errors|length > 0 %}<div class="errors">{{ form.chromosome_wid.errors|join:" " }}</div>{% endif %}
		</div>
	</div>
	
	<div class="block">
		<h1>Select {{ form.file.label }}</h1>
		<div class="content">
			{% render_field form.file class+="file" %}
			{% if form.file.errors|length > 0 %}<div class="errors">{{ form.file.errors|join:" " }}</div>{% endif %}
		</div>
	</div>

    <div class="panel panel-default">
        <div class="panel-heading">{{ form.reason.label }}</div>
            <div class="panel-body">
			{% render_field form.reason class+="form-control" style+="width:600px" %}
			{% if form.reason.errors|length > 0 %}<div class="errors">{{ form.reason.errors|join:" " }}</div>{% endif %}
            </div>
        </div>
	</div>
	
	<input class="button" type="submit" value="Submit" />
</form>
{% endblock %}
