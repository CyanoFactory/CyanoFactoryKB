<project name="BioWarehouse Unit Tests" default="test-all">

    <property name="bw.root" location="../../../.."/>
    <property name="results.dir" location="results/all"/>

    <property name="common.dir" location="${bw.root}/utils/src/java"/>
    <property name="common.test.results" location="${common.dir}/test/results/xmlResults"/>

    <property name="enumerations.dir" location="${bw.root}/enumerations-loader"/>
    <property name="enumerations.test.results" location="${enumerations.dir}/test/results/xmlResults"/>

    <property name="genbank.dir" location="${bw.root}/genbank-loader"/>
    <property name="genbank.test.results" location="${genbank.dir}/test/results/xmlResults"/>

    <property name="go.dir" location="${bw.root}/go-loader"/>
    <property name="go.test.results" location="${go.dir}/test/results/xmlResults"/>

    <property name="uniprot.dir" location="${bw.root}/uniprot-loader"/>
    <property name="uniprot.test.results" location="${uniprot.dir}/test/results/xmlResults"/>

    <target name="test-all" description="Run all JUnit tests available for the BioWarehouse">
        <mkdir dir="${results.dir}"/>

        <ant dir="${common.dir}" target="test"/>
        <ant dir="${enumerations.dir}" target="test"/>
        <ant dir="${genbank.dir}" target="test"/>
        <ant dir="${go.dir}" target="test"/>
        <ant dir="${uniprot.dir}" target="test"/>

        <junitreport todir="${results.dir}">
            <fileset dir="${common.test.results}">
                <include name="TEST-*.xml"/>
            </fileset>
            <fileset dir="${enumerations.test.results}">
                <include name="TEST-*.xml"/>
            </fileset>
            <fileset dir="${genbank.test.results}">
                <include name="TEST-*.xml"/>
            </fileset>
            <fileset dir="${go.test.results}">
                <include name="TEST-*.xml"/>
            </fileset>
            <fileset dir="${uniprot.test.results}">
                <include name="TEST-*.xml"/>
            </fileset>

            <report format="frames" todir="${results.dir}"/>
        </junitreport>

        <echo level="info" message="## ${ant.project.name}: Unit tests are completed.  See the results at ${results.dir}/index.html..."/>
    </target>

</project>